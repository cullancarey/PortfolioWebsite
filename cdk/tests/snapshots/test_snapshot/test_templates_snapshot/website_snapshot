{
  "Mappings": {
    "AWSCloudFrontPartitionHostedZoneIdMap": {
      "aws": {
        "zoneId": "Z2FDTNDATAQYW2"
      },
      "aws-cn": {
        "zoneId": "Z3RFFRIM2A3IF5"
      }
    }
  },
  "Parameters": {
    "BootstrapVersion": {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>"
    },
    "SsmParameterValuedummyacmwebsitecertarnC96584B6F00A464EAD1953AFF4B05118Parameter": {
      "Default": "/dummy/acm/website-cert-arn",
      "Type": "AWS::SSM::Parameter::Value<String>"
    },
    "SsmParameterValuedummybackuparnC96584B6F00A464EAD1953AFF4B05118Parameter": {
      "Default": "/dummy/backup/arn",
      "Type": "AWS::SSM::Parameter::Value<String>"
    },
    "SsmParameterValuedummybackupnameC96584B6F00A464EAD1953AFF4B05118Parameter": {
      "Default": "/dummy/backup/name",
      "Type": "AWS::SSM::Parameter::Value<String>"
    }
  },
  "Resources": {
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536": {
      "DependsOn": [
        "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
        "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"
      ],
      "Properties": {
        "Code": {
          "S3Bucket": "cdk-hnb659fds-assets-111111111111-us-east-1",
          "S3Key": "3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"
        },
        "Environment": {
          "Variables": {
            "AWS_CA_BUNDLE": "/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"
          }
        },
        "Handler": "index.handler",
        "Layers": [
          {
            "Ref": "TestWebsiteWebsiteFilesDeploymentAwsCliLayer8FFD1626"
          }
        ],
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "TestWebsiteWebsiteFilesLogGroup50D194DE"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265",
            "Arn"
          ]
        },
        "Runtime": "python3.13",
        "Timeout": 900
      },
      "Type": "AWS::Lambda::Function"
    },
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
              ]
            ]
          }
        ]
      },
      "Type": "AWS::IAM::Role"
    },
    "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::cdk-hnb659fds-assets-111111111111-us-east-1"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::cdk-hnb659fds-assets-111111111111-us-east-1/*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "WebsiteBucketBucketResource3B024677",
                    "Arn"
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "WebsiteBucketBucketResource3B024677",
                          "Arn"
                        ]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": [
                "cloudfront:GetInvalidation",
                "cloudfront:CreateInvalidation"
              ],
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "SsmParameterValuedummybackupnameC96584B6F00A464EAD1953AFF4B05118Parameter"
                      }
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "SsmParameterValuedummybackupnameC96584B6F00A464EAD1953AFF4B05118Parameter"
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
        "Roles": [
          {
            "Ref": "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"
          }
        ]
      },
      "Type": "AWS::IAM::Policy"
    },
    "TestWebsiteBackupWebsiteFilesDeploymentAwsCliLayer2BB51689": {
      "Properties": {
        "Content": {
          "S3Bucket": "cdk-hnb659fds-assets-111111111111-us-east-1",
          "S3Key": "c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"
        },
        "Description": "/opt/awscli/aws"
      },
      "Type": "AWS::Lambda::LayerVersion"
    },
    "TestWebsiteBackupWebsiteFilesDeploymentCustomResource6B3332C6": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "DestinationBucketName": {
          "Ref": "SsmParameterValuedummybackupnameC96584B6F00A464EAD1953AFF4B05118Parameter"
        },
        "DistributionId": {
          "Ref": "WebsiteDistribution517833D0"
        },
        "DistributionPaths": [
          "/*"
        ],
        "OutputObjectKeys": true,
        "Prune": true,
        "RetainOnDelete": false,
        "ServiceToken": {
          "Fn::GetAtt": [
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536",
            "Arn"
          ]
        },
        "SourceBucketNames": [
          "cdk-hnb659fds-assets-111111111111-us-east-1"
        ],
        "SourceObjectKeys": [
          "1ebc9d3ac2033816c4abb63e4afd69d350b4aba8704cc9236b82ea520b74f4b0.zip"
        ],
        "WaitForDistributionInvalidation": true
      },
      "Type": "Custom::CDKBucketDeployment",
      "UpdateReplacePolicy": "Delete"
    },
    "TestWebsiteBackupWebsiteFilesLogGroup79A936B9": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "RetentionInDays": 365
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain"
    },
    "TestWebsiteWebsiteFilesDeploymentAwsCliLayer8FFD1626": {
      "Properties": {
        "Content": {
          "S3Bucket": "cdk-hnb659fds-assets-111111111111-us-east-1",
          "S3Key": "c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"
        },
        "Description": "/opt/awscli/aws"
      },
      "Type": "AWS::Lambda::LayerVersion"
    },
    "TestWebsiteWebsiteFilesDeploymentCustomResource25D996F1": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "DestinationBucketName": {
          "Ref": "WebsiteBucketBucketResource3B024677"
        },
        "DistributionId": {
          "Ref": "WebsiteDistribution517833D0"
        },
        "DistributionPaths": [
          "/*"
        ],
        "OutputObjectKeys": true,
        "Prune": true,
        "RetainOnDelete": false,
        "ServiceToken": {
          "Fn::GetAtt": [
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536",
            "Arn"
          ]
        },
        "SourceBucketNames": [
          "cdk-hnb659fds-assets-111111111111-us-east-1"
        ],
        "SourceObjectKeys": [
          "1ebc9d3ac2033816c4abb63e4afd69d350b4aba8704cc9236b82ea520b74f4b0.zip"
        ],
        "WaitForDistributionInvalidation": true
      },
      "Type": "Custom::CDKBucketDeployment",
      "UpdateReplacePolicy": "Delete"
    },
    "TestWebsiteWebsiteFilesLogGroup50D194DE": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "RetentionInDays": 365
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain"
    },
    "WebsiteBucketBucketResource3B024677": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        },
        "LifecycleConfiguration": {
          "Rules": [
            {
              "NoncurrentVersionExpiration": {
                "NoncurrentDays": 2
              },
              "Status": "Enabled"
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        },
        "Tags": [
          {
            "Key": "aws-cdk:cr-owned:dd39ad7f",
            "Value": "true"
          }
        ],
        "VersioningConfiguration": {
          "Status": "Enabled"
        }
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Delete"
    },
    "WebsiteBucketBucketResourcePolicy408E6054": {
      "Properties": {
        "Bucket": {
          "Ref": "WebsiteBucketBucketResource3B024677"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": "false"
                }
              },
              "Effect": "Deny",
              "Principal": {
                "AWS": "*"
              },
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "WebsiteBucketBucketResource3B024677",
                    "Arn"
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "WebsiteBucketBucketResource3B024677",
                          "Arn"
                        ]
                      },
                      "/*"
                    ]
                  ]
                }
              ],
              "Sid": "EnforceTLS"
            },
            {
              "Action": "s3:GetObject",
              "Condition": {
                "StringEquals": {
                  "AWS:SourceArn": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:aws:cloudfront::111111111111:distribution/",
                        {
                          "Ref": "WebsiteDistribution517833D0"
                        }
                      ]
                    ]
                  }
                }
              },
              "Effect": "Allow",
              "Principal": {
                "Service": "cloudfront.amazonaws.com"
              },
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Fn::GetAtt": [
                        "WebsiteBucketBucketResource3B024677",
                        "Arn"
                      ]
                    },
                    "/*"
                  ]
                ]
              },
              "Sid": "AllowCloudFrontServicePrincipalReadOnly"
            }
          ],
          "Version": "2012-10-17"
        }
      },
      "Type": "AWS::S3::BucketPolicy"
    },
    "WebsiteDistribution517833D0": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "DistributionConfig": {
          "Aliases": [
            "example.com",
            "www.example.com"
          ],
          "Comment": "Distribution for example.com",
          "CustomErrorResponses": [
            {
              "ErrorCode": 403,
              "ResponseCode": 403,
              "ResponsePagePath": "/error.html"
            },
            {
              "ErrorCode": 404,
              "ResponseCode": 404,
              "ResponsePagePath": "/error.html"
            },
            {
              "ErrorCode": 500,
              "ResponseCode": 500,
              "ResponsePagePath": "/error.html"
            },
            {
              "ErrorCode": 502,
              "ResponseCode": 502,
              "ResponsePagePath": "/error.html"
            },
            {
              "ErrorCode": 503,
              "ResponseCode": 503,
              "ResponsePagePath": "/error.html"
            },
            {
              "ErrorCode": 504,
              "ResponseCode": 504,
              "ResponsePagePath": "/error.html"
            }
          ],
          "DefaultCacheBehavior": {
            "AllowedMethods": [
              "GET",
              "HEAD"
            ],
            "CachePolicyId": {
              "Ref": "WebsiteDistributionWebsiteCachePolicyC97ED491"
            },
            "CachedMethods": [
              "GET",
              "HEAD"
            ],
            "Compress": true,
            "FunctionAssociations": [
              {
                "EventType": "viewer-request",
                "FunctionARN": {
                  "Fn::GetAtt": [
                    "WebsiteDistributionResumeRewriteFunctionA33982BD",
                    "FunctionARN"
                  ]
                }
              }
            ],
            "ResponseHeadersPolicyId": {
              "Ref": "WebsiteDistributionResponseHeadersPolicy5B91F328"
            },
            "TargetOriginId": "TestWebsiteWebsiteDistributionOriginGroup13BD77504",
            "ViewerProtocolPolicy": "redirect-to-https"
          },
          "DefaultRootObject": "index.html",
          "Enabled": true,
          "HttpVersion": "http2",
          "IPV6Enabled": true,
          "OriginGroups": {
            "Items": [
              {
                "FailoverCriteria": {
                  "StatusCodes": {
                    "Items": [
                      500,
                      502,
                      503,
                      504
                    ],
                    "Quantity": 4
                  }
                },
                "Id": "TestWebsiteWebsiteDistributionOriginGroup13BD77504",
                "Members": {
                  "Items": [
                    {
                      "OriginId": "TestWebsiteWebsiteDistributionOrigin10FAB420C"
                    },
                    {
                      "OriginId": "TestWebsiteWebsiteDistributionOrigin28AE24C4F"
                    }
                  ],
                  "Quantity": 2
                }
              }
            ],
            "Quantity": 1
          },
          "Origins": [
            {
              "DomainName": {
                "Fn::GetAtt": [
                  "WebsiteBucketBucketResource3B024677",
                  "RegionalDomainName"
                ]
              },
              "Id": "TestWebsiteWebsiteDistributionOrigin10FAB420C",
              "OriginAccessControlId": {
                "Fn::GetAtt": [
                  "WebsiteDistributionOriginAccessControl8E32AA2E",
                  "Id"
                ]
              },
              "S3OriginConfig": {
                "OriginAccessIdentity": ""
              }
            },
            {
              "DomainName": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Ref": "SsmParameterValuedummybackupnameC96584B6F00A464EAD1953AFF4B05118Parameter"
                    },
                    ".s3.us-east-1.amazonaws.com"
                  ]
                ]
              },
              "Id": "TestWebsiteWebsiteDistributionOrigin28AE24C4F",
              "OriginAccessControlId": {
                "Fn::GetAtt": [
                  "WebsiteDistributionOriginAccessControl8E32AA2E",
                  "Id"
                ]
              },
              "S3OriginConfig": {
                "OriginAccessIdentity": ""
              }
            }
          ],
          "PriceClass": "PriceClass_100",
          "Restrictions": {
            "GeoRestriction": {
              "Locations": [
                "RU"
              ],
              "RestrictionType": "blacklist"
            }
          },
          "ViewerCertificate": {
            "AcmCertificateArn": {
              "Ref": "SsmParameterValuedummyacmwebsitecertarnC96584B6F00A464EAD1953AFF4B05118Parameter"
            },
            "MinimumProtocolVersion": "TLSv1.2_2021",
            "SslSupportMethod": "sni-only"
          }
        }
      },
      "Type": "AWS::CloudFront::Distribution",
      "UpdateReplacePolicy": "Delete"
    },
    "WebsiteDistributionOriginAccessControl8E32AA2E": {
      "Properties": {
        "OriginAccessControlConfig": {
          "Description": "Origin Access Control for example.com.",
          "Name": "OriginAccessControl",
          "OriginAccessControlOriginType": "s3",
          "SigningBehavior": "always",
          "SigningProtocol": "sigv4"
        }
      },
      "Type": "AWS::CloudFront::OriginAccessControl"
    },
    "WebsiteDistributionResponseHeadersPolicy5B91F328": {
      "Properties": {
        "ResponseHeadersPolicyConfig": {
          "Comment": "Response headers policy for example.com",
          "CorsConfig": {
            "AccessControlAllowCredentials": false,
            "AccessControlAllowHeaders": {
              "Items": [
                "*"
              ]
            },
            "AccessControlAllowMethods": {
              "Items": [
                "POST",
                "OPTIONS"
              ]
            },
            "AccessControlAllowOrigins": {
              "Items": [
                "*"
              ]
            },
            "OriginOverride": true
          },
          "Name": "TestWebsiteWebsiteDistributionResponseHeadersPolicyE1AD5A4B",
          "SecurityHeadersConfig": {
            "ContentSecurityPolicy": {
              "ContentSecurityPolicy": "default-src * data: blob:; script-src * 'unsafe-inline' 'unsafe-eval' data: blob:; style-src * 'unsafe-inline' data: blob:; img-src * data: blob:; font-src * data: blob:; frame-src * data: blob:; connect-src * data: blob:; base-uri 'self'; form-action *; upgrade-insecure-requests;",
              "Override": true
            },
            "FrameOptions": {
              "FrameOption": "DENY",
              "Override": true
            },
            "ReferrerPolicy": {
              "Override": true,
              "ReferrerPolicy": "no-referrer"
            },
            "StrictTransportSecurity": {
              "AccessControlMaxAgeSec": 31536000,
              "IncludeSubdomains": true,
              "Override": true,
              "Preload": true
            },
            "XSSProtection": {
              "ModeBlock": true,
              "Override": true,
              "Protection": true
            }
          }
        }
      },
      "Type": "AWS::CloudFront::ResponseHeadersPolicy"
    },
    "WebsiteDistributionResumeRewriteFunctionA33982BD": {
      "Properties": {
        "AutoPublish": true,
        "FunctionCode": "\n                function handler(event) {\n                    var request = event.request;\n                    var uri = request.uri;\n\n                    // Handle /resume \u2192 rewrite\n                    if (uri === \"/resume\" || uri === \"/resume/\") {\n                        request.uri = \"/resume.pdf\";\n                        return request;\n                    }\n\n                    return request;\n                    }\n                ",
        "FunctionConfig": {
          "Comment": "us-east-1TestWebsiteWebsieRewriteFunctionDD11443E",
          "Runtime": "cloudfront-js-1.0"
        },
        "Name": "us-east-1TestWebsiteWebsieRewriteFunctionDD11443E"
      },
      "Type": "AWS::CloudFront::Function"
    },
    "WebsiteDistributionWebsiteCachePolicyC97ED491": {
      "Properties": {
        "CachePolicyConfig": {
          "Comment": "Custom cache policy for website assets",
          "DefaultTTL": 2592000,
          "MaxTTL": 31536000,
          "MinTTL": 0,
          "Name": "TestWebsiteWebsiteDistributionWebsiteCachePolicyF5EF0D09-us-east-1",
          "ParametersInCacheKeyAndForwardedToOrigin": {
            "CookiesConfig": {
              "CookieBehavior": "none"
            },
            "EnableAcceptEncodingBrotli": true,
            "EnableAcceptEncodingGzip": true,
            "HeadersConfig": {
              "HeaderBehavior": "none"
            },
            "QueryStringsConfig": {
              "QueryStringBehavior": "none"
            }
          }
        }
      },
      "Type": "AWS::CloudFront::CachePolicy"
    },
    "examplecomRecord9A3A6382": {
      "Properties": {
        "AliasTarget": {
          "DNSName": {
            "Fn::GetAtt": [
              "WebsiteDistribution517833D0",
              "DomainName"
            ]
          },
          "HostedZoneId": {
            "Fn::FindInMap": [
              "AWSCloudFrontPartitionHostedZoneIdMap",
              {
                "Ref": "AWS::Partition"
              },
              "zoneId"
            ]
          }
        },
        "HostedZoneId": "DUMMY",
        "Name": "example.com.",
        "Type": "A"
      },
      "Type": "AWS::Route53::RecordSet"
    },
    "wwwexamplecomRecord0F6CE3EA": {
      "Properties": {
        "AliasTarget": {
          "DNSName": {
            "Fn::GetAtt": [
              "WebsiteDistribution517833D0",
              "DomainName"
            ]
          },
          "HostedZoneId": {
            "Fn::FindInMap": [
              "AWSCloudFrontPartitionHostedZoneIdMap",
              {
                "Ref": "AWS::Partition"
              },
              "zoneId"
            ]
          }
        },
        "HostedZoneId": "DUMMY",
        "Name": "www.example.com.",
        "Type": "A"
      },
      "Type": "AWS::Route53::RecordSet"
    }
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5"
                  ],
                  {
                    "Ref": "BootstrapVersion"
                  }
                ]
              }
            ]
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
        }
      ]
    }
  }
}